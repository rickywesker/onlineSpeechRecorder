{"remainingRequest":"/root/ricky/onlineSpeechRecorder/vue-project/node_modules/babel-loader/lib/index.js!/root/ricky/onlineSpeechRecorder/vue-project/node_modules/cache-loader/dist/cjs.js??ref--0-0!/root/ricky/onlineSpeechRecorder/vue-project/node_modules/vue-loader/lib/index.js??vue-loader-options!/root/ricky/onlineSpeechRecorder/vue-project/src/components/TextRecorder.vue?vue&type=script&lang=js&","dependencies":[{"path":"/root/ricky/onlineSpeechRecorder/vue-project/src/components/TextRecorder.vue","mtime":1696214435159},{"path":"/root/ricky/onlineSpeechRecorder/vue-project/node_modules/cache-loader/dist/cjs.js","mtime":1696210927070},{"path":"/root/ricky/onlineSpeechRecorder/vue-project/node_modules/babel-loader/lib/index.js","mtime":1696210927558},{"path":"/root/ricky/onlineSpeechRecorder/vue-project/node_modules/cache-loader/dist/cjs.js","mtime":1696210927070},{"path":"/root/ricky/onlineSpeechRecorder/vue-project/node_modules/vue-loader/lib/index.js","mtime":1696210924314}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKZXhwb3J0IGRlZmF1bHQgewogIHByb3BzOiB7CiAgICB0ZXh0OiBTdHJpbmcsCiAgICBpbmRleDogTnVtYmVyLAogICAgdG90YWw6IE51bWJlcgogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHJlY29yZGluZzogZmFsc2UsCiAgICAgIHVybDogbnVsbAogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICBmaWxlX25hbWUoKSB7CiAgICAgIGxldCBwYWRkZWRfbnVtYmVyID0gIiI7CiAgICAgIGlmICh0aGlzLmluZGV4IDwgMTApIHsKICAgICAgICBwYWRkZWRfbnVtYmVyID0gYDAwJHt0aGlzLmluZGV4ICsgMX1gOwogICAgICB9IGVsc2UgaWYgKHRoaXMuaW5kZXggPCAxMDApIHsKICAgICAgICBwYWRkZWRfbnVtYmVyID0gYDAke3RoaXMuaW5kZXggKyAxfWA7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcGFkZGVkX251bWJlciA9IGAke3RoaXMuaW5kZXggKyAxfWA7CiAgICAgIH0KICAgICAgcmV0dXJuIGB1dHRlcmFuY2UtJHtwYWRkZWRfbnVtYmVyfS5tcDNgOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgdG9nZ2xlX3JlY29yZCgpIHsKICAgICAgdGhpcy5yZWNvcmRpbmcgPSAhdGhpcy5yZWNvcmRpbmc7CiAgICB9LAogICAgY2FsbGJhY2soZGF0YSkgewogICAgICBjb25zb2xlLmRlYnVnKGRhdGEpOwogICAgICBpZiAoZGF0YSAmJiBkYXRhLnVybCkgewogICAgICAgIHRoaXMudXJsID0gZGF0YS51cmw7IC8vIHdpbmRvdy5VUkwuY3JlYXRlT2JqZWN0VVJMKGRhdGEuYmxvYik7CiAgICAgICAgLy8gVXBsb2FkIHRoZSBhdWRpbyBmaWxlIHRvIHRoZSBzZXJ2ZXIKICAgICAgICBjb25zdCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpOwogICAgICAgIGZvcm1EYXRhLmFwcGVuZCgnYXVkaW8nLCBkYXRhLmJsb2IsIGB2b2ljZV8ke3RoaXMuaW5kZXh9Lm1wM2ApOwogICAgICAgIGF4aW9zLnBvc3QoJ2h0dHBzOi8vZWFnbGUtbm90YWJsZS1hZGVxdWF0ZWx5Lm5ncm9rLWZyZWUuYXBwL3VwbG9hZCcsIGZvcm1EYXRhLCB7CiAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnbXVsdGlwYXJ0L2Zvcm0tZGF0YScKICAgICAgICAgIH0KICAgICAgICB9KS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgIGNvbnNvbGUubG9nKCdVcGxvYWQgc3VjY2Vzc2Z1bDonLCByZXNwb25zZS5kYXRhKTsKICAgICAgICB9KS5jYXRjaChlcnJvciA9PiB7CiAgICAgICAgICBjb25zb2xlLmVycm9yKCdVcGxvYWQgZXJyb3I6JywgZXJyb3IpOwogICAgICAgIH0pOwogICAgICAgIC8vIHZhciBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYSIpOwogICAgICAgIC8vIGxpbmsuaHJlZiA9IHRoaXMudXJsOwogICAgICAgIC8vIGxpbmsuaW5uZXJIVE1MID0gImRvd25sb2FkIGhlcmUiOwogICAgICAgIC8vIGxpbmsuZG93bmxvYWQgPSBgdm9pY2VfJHt0aGlzLmluZGV4fS5tcDNgOwogICAgICAgIC8vIC8vIGxpbmsuc3R5bGUgPSAiZGlzcGxheTogbm9uZSI7CiAgICAgICAgLy8gZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChsaW5rKTsKICAgICAgICAvLyBsaW5rLmNsaWNrKCk7CiAgICAgICAgLy8gY29uc29sZS5sb2coImRpbmUiKTsKICAgICAgICAvLyB3aW5kb3cuVVJMLnJldm9rZU9iamVjdFVSTCh0aGlzLnVybCk7CiAgICAgIH0KICAgIH0KICB9Cn07"},{"version":3,"names":["axios","props","text","String","index","Number","total","data","recording","url","computed","file_name","padded_number","methods","toggle_record","callback","console","debug","formData","FormData","append","blob","post","headers","then","response","log","catch","error"],"sources":["src/components/TextRecorder.vue"],"sourcesContent":["<template>\n  <div class=\"hello\">\n    <h1>Read the text ({{index}}/{{total}})</h1>\n    <h3>{{text}}</h3>\n    <br>\n\n    <div style=\"width: 400px; margin: auto; text-align: center;\">\n      <audio-recorder :pause-recording=\"callback\" :after-recording=\"callback\"/>\n      <br>\n      <audio v-if=\"url\" :src=\"url\" controls :title=\"file_name\"/>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from 'axios';\n\nexport default {\n  props: {\n    text: String,\n    index: Number,\n    total: Number\n  },\n  data() {\n    return {\n      recording: false,\n      url: null\n    };\n  },\n  computed: {\n    file_name() {\n      let padded_number = \"\";\n      if (this.index < 10) {\n        padded_number = `00${this.index + 1}`;\n      } else if (this.index < 100) {\n        padded_number = `0${this.index + 1}`;\n      } else {\n        padded_number = `${this.index + 1}`;\n      }\n\n      return `utterance-${padded_number}.mp3`;\n    }\n  },\n  methods: {\n    toggle_record() {\n      this.recording = !this.recording;\n    },\n    callback(data) {\n      console.debug(data);\n      if (data && data.url) {\n        this.url = data.url; // window.URL.createObjectURL(data.blob);\n        // Upload the audio file to the server\n        const formData = new FormData();\n        formData.append('audio', data.blob, `voice_${this.index}.mp3`);\n        \n        axios.post('https://eagle-notable-adequately.ngrok-free.app/upload', formData, {\n            headers: {\n                'Content-Type': 'multipart/form-data'\n            }\n        })\n        .then(response => {\n            console.log('Upload successful:', response.data);\n        })\n        .catch(error => {\n            console.error('Upload error:', error);\n        });\n        // var link = document.createElement(\"a\");\n        // link.href = this.url;\n        // link.innerHTML = \"download here\";\n        // link.download = `voice_${this.index}.mp3`;\n        // // link.style = \"display: none\";\n        // document.body.appendChild(link);\n        // link.click();\n        // console.log(\"dine\");\n        // window.URL.revokeObjectURL(this.url);\n      }\n    }\n  }\n};\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style>\nh3 {\n  margin: 40px 0 0;\n}\n\n.ar-records {\n  display: none !important;\n}\n\n.ar-player {\n  display: none !important;\n}\n</style>\n"],"mappings":"AAeA,OAAAA,KAAA;AAEA;EACAC,KAAA;IACAC,IAAA,EAAAC,MAAA;IACAC,KAAA,EAAAC,MAAA;IACAC,KAAA,EAAAD;EACA;EACAE,KAAA;IACA;MACAC,SAAA;MACAC,GAAA;IACA;EACA;EACAC,QAAA;IACAC,UAAA;MACA,IAAAC,aAAA;MACA,SAAAR,KAAA;QACAQ,aAAA,aAAAR,KAAA;MACA,gBAAAA,KAAA;QACAQ,aAAA,YAAAR,KAAA;MACA;QACAQ,aAAA,WAAAR,KAAA;MACA;MAEA,oBAAAQ,aAAA;IACA;EACA;EACAC,OAAA;IACAC,cAAA;MACA,KAAAN,SAAA,SAAAA,SAAA;IACA;IACAO,SAAAR,IAAA;MACAS,OAAA,CAAAC,KAAA,CAAAV,IAAA;MACA,IAAAA,IAAA,IAAAA,IAAA,CAAAE,GAAA;QACA,KAAAA,GAAA,GAAAF,IAAA,CAAAE,GAAA;QACA;QACA,MAAAS,QAAA,OAAAC,QAAA;QACAD,QAAA,CAAAE,MAAA,UAAAb,IAAA,CAAAc,IAAA,gBAAAjB,KAAA;QAEAJ,KAAA,CAAAsB,IAAA,2DAAAJ,QAAA;UACAK,OAAA;YACA;UACA;QACA,GACAC,IAAA,CAAAC,QAAA;UACAT,OAAA,CAAAU,GAAA,uBAAAD,QAAA,CAAAlB,IAAA;QACA,GACAoB,KAAA,CAAAC,KAAA;UACAZ,OAAA,CAAAY,KAAA,kBAAAA,KAAA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;MACA;IACA;EACA;AACA"}]}