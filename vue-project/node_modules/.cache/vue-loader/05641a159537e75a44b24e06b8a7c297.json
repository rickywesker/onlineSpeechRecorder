{"remainingRequest":"/root/ricky/onlineSpeechRecorder/vue-project/node_modules/vue-loader/lib/index.js??vue-loader-options!/root/ricky/onlineSpeechRecorder/vue-project/src/components/TextRecorder.vue?vue&type=style&index=0&id=ea40288a&lang=css&","dependencies":[{"path":"/root/ricky/onlineSpeechRecorder/vue-project/src/components/TextRecorder.vue","mtime":1696214435159},{"path":"/root/ricky/onlineSpeechRecorder/vue-project/node_modules/css-loader/dist/cjs.js","mtime":1696210927018},{"path":"/root/ricky/onlineSpeechRecorder/vue-project/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1696210925278},{"path":"/root/ricky/onlineSpeechRecorder/vue-project/node_modules/postcss-loader/src/index.js","mtime":1696210925418},{"path":"/root/ricky/onlineSpeechRecorder/vue-project/node_modules/cache-loader/dist/cjs.js","mtime":1696210927070},{"path":"/root/ricky/onlineSpeechRecorder/vue-project/node_modules/vue-loader/lib/index.js","mtime":1696210924314}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmgzIHsKICBtYXJnaW46IDQwcHggMCAwOwp9CgouYXItcmVjb3JkcyB7CiAgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50Owp9CgouYXItcGxheWVyIHsKICBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7Cn0K"},{"version":3,"sources":["TextRecorder.vue"],"names":[],"mappings":";AAmFA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA","file":"TextRecorder.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"hello\">\n    <h1>Read the text ({{index}}/{{total}})</h1>\n    <h3>{{text}}</h3>\n    <br>\n\n    <div style=\"width: 400px; margin: auto; text-align: center;\">\n      <audio-recorder :pause-recording=\"callback\" :after-recording=\"callback\"/>\n      <br>\n      <audio v-if=\"url\" :src=\"url\" controls :title=\"file_name\"/>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from 'axios';\n\nexport default {\n  props: {\n    text: String,\n    index: Number,\n    total: Number\n  },\n  data() {\n    return {\n      recording: false,\n      url: null\n    };\n  },\n  computed: {\n    file_name() {\n      let padded_number = \"\";\n      if (this.index < 10) {\n        padded_number = `00${this.index + 1}`;\n      } else if (this.index < 100) {\n        padded_number = `0${this.index + 1}`;\n      } else {\n        padded_number = `${this.index + 1}`;\n      }\n\n      return `utterance-${padded_number}.mp3`;\n    }\n  },\n  methods: {\n    toggle_record() {\n      this.recording = !this.recording;\n    },\n    callback(data) {\n      console.debug(data);\n      if (data && data.url) {\n        this.url = data.url; // window.URL.createObjectURL(data.blob);\n        // Upload the audio file to the server\n        const formData = new FormData();\n        formData.append('audio', data.blob, `voice_${this.index}.mp3`);\n        \n        axios.post('https://eagle-notable-adequately.ngrok-free.app/upload', formData, {\n            headers: {\n                'Content-Type': 'multipart/form-data'\n            }\n        })\n        .then(response => {\n            console.log('Upload successful:', response.data);\n        })\n        .catch(error => {\n            console.error('Upload error:', error);\n        });\n        // var link = document.createElement(\"a\");\n        // link.href = this.url;\n        // link.innerHTML = \"download here\";\n        // link.download = `voice_${this.index}.mp3`;\n        // // link.style = \"display: none\";\n        // document.body.appendChild(link);\n        // link.click();\n        // console.log(\"dine\");\n        // window.URL.revokeObjectURL(this.url);\n      }\n    }\n  }\n};\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style>\nh3 {\n  margin: 40px 0 0;\n}\n\n.ar-records {\n  display: none !important;\n}\n\n.ar-player {\n  display: none !important;\n}\n</style>\n"]}]}