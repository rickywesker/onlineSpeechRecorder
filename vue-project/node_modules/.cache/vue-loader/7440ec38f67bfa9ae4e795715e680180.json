{"remainingRequest":"/root/ricky/onlineSpeechRecorder/vue-project/node_modules/vue-loader/lib/index.js??vue-loader-options!/root/ricky/onlineSpeechRecorder/vue-project/src/components/TextRecorder.vue?vue&type=script&lang=js&","dependencies":[{"path":"/root/ricky/onlineSpeechRecorder/vue-project/src/components/TextRecorder.vue","mtime":1696214435159},{"path":"/root/ricky/onlineSpeechRecorder/vue-project/node_modules/cache-loader/dist/cjs.js","mtime":1696210927070},{"path":"/root/ricky/onlineSpeechRecorder/vue-project/node_modules/babel-loader/lib/index.js","mtime":1696210927558},{"path":"/root/ricky/onlineSpeechRecorder/vue-project/node_modules/cache-loader/dist/cjs.js","mtime":1696210927070},{"path":"/root/ricky/onlineSpeechRecorder/vue-project/node_modules/vue-loader/lib/index.js","mtime":1696210924314}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CgpleHBvcnQgZGVmYXVsdCB7CiAgcHJvcHM6IHsKICAgIHRleHQ6IFN0cmluZywKICAgIGluZGV4OiBOdW1iZXIsCiAgICB0b3RhbDogTnVtYmVyCiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgcmVjb3JkaW5nOiBmYWxzZSwKICAgICAgdXJsOiBudWxsCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGZpbGVfbmFtZSgpIHsKICAgICAgbGV0IHBhZGRlZF9udW1iZXIgPSAiIjsKICAgICAgaWYgKHRoaXMuaW5kZXggPCAxMCkgewogICAgICAgIHBhZGRlZF9udW1iZXIgPSBgMDAke3RoaXMuaW5kZXggKyAxfWA7CiAgICAgIH0gZWxzZSBpZiAodGhpcy5pbmRleCA8IDEwMCkgewogICAgICAgIHBhZGRlZF9udW1iZXIgPSBgMCR7dGhpcy5pbmRleCArIDF9YDsKICAgICAgfSBlbHNlIHsKICAgICAgICBwYWRkZWRfbnVtYmVyID0gYCR7dGhpcy5pbmRleCArIDF9YDsKICAgICAgfQoKICAgICAgcmV0dXJuIGB1dHRlcmFuY2UtJHtwYWRkZWRfbnVtYmVyfS5tcDNgOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgdG9nZ2xlX3JlY29yZCgpIHsKICAgICAgdGhpcy5yZWNvcmRpbmcgPSAhdGhpcy5yZWNvcmRpbmc7CiAgICB9LAogICAgY2FsbGJhY2soZGF0YSkgewogICAgICBjb25zb2xlLmRlYnVnKGRhdGEpOwogICAgICBpZiAoZGF0YSAmJiBkYXRhLnVybCkgewogICAgICAgIHRoaXMudXJsID0gZGF0YS51cmw7IC8vIHdpbmRvdy5VUkwuY3JlYXRlT2JqZWN0VVJMKGRhdGEuYmxvYik7CiAgICAgICAgLy8gVXBsb2FkIHRoZSBhdWRpbyBmaWxlIHRvIHRoZSBzZXJ2ZXIKICAgICAgICBjb25zdCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpOwogICAgICAgIGZvcm1EYXRhLmFwcGVuZCgnYXVkaW8nLCBkYXRhLmJsb2IsIGB2b2ljZV8ke3RoaXMuaW5kZXh9Lm1wM2ApOwogICAgICAgIAogICAgICAgIGF4aW9zLnBvc3QoJ2h0dHBzOi8vZWFnbGUtbm90YWJsZS1hZGVxdWF0ZWx5Lm5ncm9rLWZyZWUuYXBwL3VwbG9hZCcsIGZvcm1EYXRhLCB7CiAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnbXVsdGlwYXJ0L2Zvcm0tZGF0YScKICAgICAgICAgICAgfQogICAgICAgIH0pCiAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgICBjb25zb2xlLmxvZygnVXBsb2FkIHN1Y2Nlc3NmdWw6JywgcmVzcG9uc2UuZGF0YSk7CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goZXJyb3IgPT4gewogICAgICAgICAgICBjb25zb2xlLmVycm9yKCdVcGxvYWQgZXJyb3I6JywgZXJyb3IpOwogICAgICAgIH0pOwogICAgICAgIC8vIHZhciBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYSIpOwogICAgICAgIC8vIGxpbmsuaHJlZiA9IHRoaXMudXJsOwogICAgICAgIC8vIGxpbmsuaW5uZXJIVE1MID0gImRvd25sb2FkIGhlcmUiOwogICAgICAgIC8vIGxpbmsuZG93bmxvYWQgPSBgdm9pY2VfJHt0aGlzLmluZGV4fS5tcDNgOwogICAgICAgIC8vIC8vIGxpbmsuc3R5bGUgPSAiZGlzcGxheTogbm9uZSI7CiAgICAgICAgLy8gZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChsaW5rKTsKICAgICAgICAvLyBsaW5rLmNsaWNrKCk7CiAgICAgICAgLy8gY29uc29sZS5sb2coImRpbmUiKTsKICAgICAgICAvLyB3aW5kb3cuVVJMLnJldm9rZU9iamVjdFVSTCh0aGlzLnVybCk7CiAgICAgIH0KICAgIH0KICB9Cn07Cg=="},{"version":3,"sources":["TextRecorder.vue"],"names":[],"mappings":";AAeA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"TextRecorder.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"hello\">\n    <h1>Read the text ({{index}}/{{total}})</h1>\n    <h3>{{text}}</h3>\n    <br>\n\n    <div style=\"width: 400px; margin: auto; text-align: center;\">\n      <audio-recorder :pause-recording=\"callback\" :after-recording=\"callback\"/>\n      <br>\n      <audio v-if=\"url\" :src=\"url\" controls :title=\"file_name\"/>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from 'axios';\n\nexport default {\n  props: {\n    text: String,\n    index: Number,\n    total: Number\n  },\n  data() {\n    return {\n      recording: false,\n      url: null\n    };\n  },\n  computed: {\n    file_name() {\n      let padded_number = \"\";\n      if (this.index < 10) {\n        padded_number = `00${this.index + 1}`;\n      } else if (this.index < 100) {\n        padded_number = `0${this.index + 1}`;\n      } else {\n        padded_number = `${this.index + 1}`;\n      }\n\n      return `utterance-${padded_number}.mp3`;\n    }\n  },\n  methods: {\n    toggle_record() {\n      this.recording = !this.recording;\n    },\n    callback(data) {\n      console.debug(data);\n      if (data && data.url) {\n        this.url = data.url; // window.URL.createObjectURL(data.blob);\n        // Upload the audio file to the server\n        const formData = new FormData();\n        formData.append('audio', data.blob, `voice_${this.index}.mp3`);\n        \n        axios.post('https://eagle-notable-adequately.ngrok-free.app/upload', formData, {\n            headers: {\n                'Content-Type': 'multipart/form-data'\n            }\n        })\n        .then(response => {\n            console.log('Upload successful:', response.data);\n        })\n        .catch(error => {\n            console.error('Upload error:', error);\n        });\n        // var link = document.createElement(\"a\");\n        // link.href = this.url;\n        // link.innerHTML = \"download here\";\n        // link.download = `voice_${this.index}.mp3`;\n        // // link.style = \"display: none\";\n        // document.body.appendChild(link);\n        // link.click();\n        // console.log(\"dine\");\n        // window.URL.revokeObjectURL(this.url);\n      }\n    }\n  }\n};\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style>\nh3 {\n  margin: 40px 0 0;\n}\n\n.ar-records {\n  display: none !important;\n}\n\n.ar-player {\n  display: none !important;\n}\n</style>\n"]}]}